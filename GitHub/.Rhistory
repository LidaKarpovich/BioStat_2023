min(c(17.24, 35.77, 57.57, 30.15, 43.27, 77.56, 72.19, 40.45, 46.2, 39.92))
max(c(17.24, 35.77, 57.57, 30.15, 43.27, 77.56, 72.19, 40.45, 46.2, 39.92))
min(c(60.22, 31.91, 72.71, 52.49, 46.21, 60.39, 60.09))
min(c(68.92, 44.15, 34.2, 34.12, 37.7, 73.95, 36.9, 59.26, 31.06, 55.79, 73.92, 68.04, 53.73, 90.7, 39.66))
min(c(90.48, 31.16, 44.4, 21.94, 84.37, 53.15, 81.15, 47.86, 63.23, 46.75, 102.73))
min(c(48.11, 45.3, 58.42, 51.64, 62.07, 57.26, 49.69, 93.29, 81.18, 44.78, 55.1, 76.74, 58.08))
max(c(48.11, 45.3, 58.42, 51.64, 62.07, 57.26, 49.69, 93.29, 81.18, 44.78, 55.1, 76.74, 58.08))
quantile(c(80.94, 44.46, 46.33, 65.1, 66.42, 104.43, 53.15, 48.41, 12.88, 51.1, 43.03, 40.3, 33.71, 55.1, 22.17))
quantile(c(26.17, 97.73, 24.81, 53.62, 87.72, 45.19, 45.7, 69.63, 36.76, 7.17))
quantile(c(63.92, 35.85, 26.9, 48.92, 43.1, 66.94, 47.06, 56.54, 29.1, 58.88))
quantile(c(32.05, 93.85, 85.52, 56.69, 23.69, 11.29, 51.44, 63.09, 65.65, 35.73, 60.15, 30.93, -4.2))
var(c(47.44, 62.44, 20.44, 72.75, 77.86, 13.74, 28.2, 50.47, 59.19, 69.04))
var(c(49.31, 44.47, 14.04, 44.43, 49.18, 40.73, 44.65, 41.91, 80.38, 80.09))
var(c(57.96, 20.81, 8.92, 14.03, 61.02, 25.69, 21.22, 49.56, 25.64, 28.31))
var(c(76.22, 65, 19.69, 29.84, 37.18, 70.93, 64.78, 61.66, 49.03, 51.56))
IQR(c(80.94, 44.46, 46.33, 65.1, 66.42, 104.43, 53.15, 48.41, 12.88, 51.1, 43.03, 40.3, 33.71, 55.1, 22.17))
IQR(c(26.17, 97.73, 24.81, 53.62, 87.72, 45.19, 45.7, 69.63, 36.76, 7.17))
IQR(c(63.92, 35.85, 26.9, 48.92, 43.1, 66.94, 47.06, 56.54, 29.1, 58.88))
sms <- sd(x)/sqrt(length(x))
x <- c(47.44, 62.44, 20.44, 72.75, 77.86, 13.74, 28.2, 50.47, 59.19, 69.04)
sd(x)/sqrt(length(x))
x <- c(49.31, 44.47, 14.04, 44.43, 49.18, 40.73, 44.65, 41.91, 80.38, 80.09)
sd(x)/sqrt(length(x))
x <- c(57.96, 20.81, 8.92, 14.03, 61.02, 25.69, 21.22, 49.56, 25.64, 28.31)
sd(x)/sqrt(length(x))
x <- c(76.22, 65, 19.69, 29.84, 37.18, 70.93, 64.78, 61.66, 49.03, 51.56)
sd(x)/sqrt(length(x))
install.packages("readr")
readRDS("C:\Users\79214\Downloads\numeric_data.rds")
readRDS("C:/Users/79214/Downloads/numeric_data.rds")
x <- readRDS("C:/Users/79214/Downloads/numeric_data.rds")
describe(x, digits = 2)
install.packages("psych")
describe(x, digits = 2)
psych::describe(x)
library(tibble)
suppressWarnings(library(tibble))
library(tibble)
data <- readRDS("C:/Users/79214/Downloads/numeric_data.rds")
install.packages("dplyr")
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data %>% select(`Группа`, function(x) !is.factor(x))
View(x)
View(data)
View(x)
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data <- readRDS("C:/Users/79214/Downloads/numeric_data.rds")
install.packages("dplyr")
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
dplyr::select
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
library(dplyr)
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
rlang::last_trace()
View(data)
data %>% select(function(x) any(str_detect(x, "Жен")))
data <- readRDS("C:/Users/79214/Downloads/numeric_data.rds")
install.packages("dplyr")
library(dplyr)
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
install.packages("dplyr")
data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data %>%
select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data <- readRDS("C:/Users/79214/Downloads/numeric_data.rds")
install.packages("dplyr")
library(dplyr)
data %>%
select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data %>%
select(function(x) any(str_detect(x, "Жен")))
install.packages("stringr")
library(stringr)
data %>%
select(function(x) any(str_detect(x, "Жен")))
data %>%
select(Группа крови, `Возраст`, function(x) anyNA(x))
data %>%
select(function(x) sd(x, na.rm = TRUE) > 1)
data %>%
select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1))
data %>%
select(`Группа`, (function(x) is.factor(x)) | where(function(x) is.numeric(x)))
data %>%
select(`Пол`, `Группа`, `Базофилы_E1`)
data <- readRDS(""C:/Users/79214/Downloads/data_tsv.tsv"")
data <- readRDS("C:/Users/79214/Downloads/data_tsv.tsv")
install.packages("readr")
library(readr)
data <- read("C:/Users/79214/Downloads/data_tsv.tsv")
data <- read_tsv("C:/Users/79214/Downloads/data_tsv.tsv")
data <- read_tsv("C:/Users/79214/Downloads/data_tsv.tsv",show_col_types = FALSE)
data %>%
select(Группа крови, `Возраст`, function(x) anyNA(x))
install.packages("readr")
library(readr)
data <- read_tsv("C:/Users/79214/Downloads/data_tsv.tsv",show_col_types = FALSE)
install.packages("dplyr")
library(dplyr)
install.packages("stringr")
library(stringr)
data %>%
select(Группа крови, `Возраст`, function(x) anyNA(x))
install.packages("stringr")
data %>%
select(Группа крови, `Возраст`, function(x) anyNA(x))
data %>%
select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1))
install.packages("dplyr")
library(dplyr)
data %>%
select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1))
data %>%
select(`Пол`, `Группа`, `Базофилы_E1`))
data %>%
select(`Пол`, `Группа`, `Базофилы_E1`)
data %>%
select(function(x) sd(x, na.rm = TRUE) > 1)
data %>%
select(`Группа`, function(x) !is.factor(x))
data %>%
select(`Группа`, (function(x) is.factor(x)) | where(function(x) is.numeric(x)))
data %>%
select(`Группа крови`, `Возраст`, function(x) anyNA(x))
data %>%
select(function(x) any(str_detect(x, "Жен")))
install.packages("stringr")
library(stringr)
data %>%
select(function(x) any(str_detect(x, "Жен")))
View(data)
data %>%
select(function(x) any(str_detect(x, "Женский")))
data %>%
select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1))
suppressWarnings(data %>% select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1)))
suppressWarnings(data %>% select(where(is.numeric) & where(function(x) sd(x, na.rm=TRUE) > 1)))
suppressWarnings(data %>% select(function(x) sd(x, na.rm = TRUE) > 1))
suppressWarnings(data %>% select(`Группа`, function(x) !is.factor(x)))
suppressWarnings(data %>% select(`Группа`, (function(x) is.factor(x)) | where(function(x) is.numeric(x))))
suppressWarnings(data %>% select(function(x) sd(x, na.rm = TRUE) > 1))
suppressWarnings(data %>% select(where(is.numeric) & where(function(x) sd(x, na.rm = TRUE) > 1)))
suppressWarnings(data %>% select(function(x) any(str_detect(x, "Жен"))))
suppressWarnings(data %>% select(`Группа крови`, `Возраст`, function(x) anyNA(x)))
sd(data, na.rm = TRUE) > 1
suppressWarnings(data %>% select(`Пол`, `Группа`, `Базофилы_E1`))
data %>% mutate(across(!contains("E1") & !c(`Группа`, `Возраст`) & !where(is.factor), function(x) x ^ 2), across(contains("E2"), function(x) x * 100))
data %>% mutate(across(!contains("E1"), function(x) str_c(x, " + некая строка")))
data %>% mutate(across(!contains("E1") & !c(`Группа`, `Возраст`), function(x) x ^ 2))
data %>% mutate(across(function(x) any(near(x, 0.5, tol = 0.1)), function(x) x + 1000))
knitr::opts_chunk$set(echo = TRUE)
data <- read_tsv("data/raw/data_tsv.tsv", skip = 0, n_max = Inf)
install.packages("readr")
data <- read_tsv("data/raw/data_tsv.tsv", skip = 0, n_max = Inf)
data <- read_tsv("data/raw/data_tsv.tsv")
data <- read_tsv(""C:/Users/79214/Downloads/data_tsv.tsv"")
data <- read_tsv("C:/Users/79214/Downloads/data_tsv.tsv")
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble"))
library(readr)
library(tibble)
data <- read_tsv("C:/Users/79214/Downloads/data_tsv.tsv")
as_tibble(data)
data %>% view()
summary(data)
psych::describe(data)
prop.table(table(data$Группа, data$'Группа крови'))
plot(pressure)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr"))
library(readr)
library(tibble)
library(dplyr)
install.packages(c("readr", "tibble", "dplyr"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr"))
library(readr)
library(tibble)
library(dplyr)
data %>%
mutate(ID - row_number())
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr"))
library(readr)
library(tibble)
library(dplyr)
install.packages(c("readr", "tibble", "dplyr"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr"))
library(readr)
library(tibble)
library(dplyr)
data_1 <- tibble(var_1 = "var 1", var_2 = "var 2", var_3 = "var 3")
data_2 <- tibble(var_1 = "var 1", var_2 = "var 2")
data_3 <- tibble(var_1 = "var 1", var_2 = "var 2")
data_1 %>% bind_rows(data_2) %>% bind_rows(data_3)
install.packages(c("readr", "tibble", "dplyr"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr"))
library(readr)
library(tibble)
library(dplyr)
data %>% group_by(column_name)
data %>% group_by("Группа")
data %>% group_by("Группа")
data %>% group_by("Группа") %>% ungroup()
data %>% group_by("Группа") %>% ungroup()
data %>%
split(~ 'Группа')
data %>%
split(~ `Группа`)
data %>%
select(`Группа крови`, `Рост`)
data %>%
select(`Группа`, where(is.numeric) & function(x) mean(x, na.rm = TRUE) > 10)
data %>%
select(`Группа`, where(is.numeric))
data %>% select(contains("_E1"))
data %>%
slice_head(prop = 0.1)
data %>%
filter(`Группа крови` %in% c("A (II)", "O (I)") & `Группа` != "Группа 1")
data %>%
filter(if_all(.cols = contains("Базофилы"), .fns = function(x) x > 1.5))
data %>%
group_by(`Группа`) %>%
filter(`Возраст` > 36)
data %>%
mutate(`Женщины с четвёртой группой крови` = ifelse(`Пол` == "Женский" & `Группа крови` == "AB (IV), "да", "нет")) %>%
data %>%
mutate(`Женщины с четвёртой группой крови` = ifelse(`Пол` == "Женский" & `Группа крови` == "AB (IV), "Да", "Нет")) %>%
data %>%
mutate(`Женщины с четвёртой группой крови` = ifelse(`Пол` == "Женский" & `Группа крови` == "AB (IV)", "Да", "Нет")) %>%
select (`Женщины с четвёртой группой крови`, everything()) %>%
arrange(`Женщины с четвёртой группой крови`)
data %>%
mutate(`Группа крови` = `Группа крови` %>% na_if("B (III)"))
data %>%
arrange(desc(`Рост`), `Возраст`)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
pivot_longer(!`Группа`) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
pivot_longer(!`Группа`) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
pivot_longer(!`Группа`) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "_") %>%
rename(`Значение` = value)
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.factor)) %>%
mutate(`Группа крови` = `Группа крови` %>% as.character() %>% replace_na("Нет данных") %>% as.factor()) %>%
count(`Группа`, `Группа крови`) %>%
group_by(`Группа`) %>%
mutate(`Процент по группе` = (n / sum(n)) %>% round(4) %>% `*`(100) %>% str_c("%")) %>%
ungroup() %>%
mutate(`Процент по выборке` = (n / sum(n)) %>% round(4) %>% `*`(100))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("https://cran.r-project.org/src/contrib/flextable_0.9.3.tar.gz", repos = NULL, type="source")
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("https://cran.r-project.org/src/contrib/flextable_0.9.3.tar.gz", repos = NULL, type="source")
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("flextable",
repos = c("http://rstudio.org/_packages",
"http://cran.rstudio.com"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("flextable",
repos = c("http://rstudio.org/_packages",
"http://cran.rstudio.com"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
installed.packages()
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
pivot_longer(!`Группа`) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value) %>%
flextable() %>%
theme_box() %>%
merge_v(c("Группа", "Переменная"))
statistics <- list(
`Количество субъектов` = ~length(.x),
`Количество (есть данные)` = ~sum(!is.na(.x)),
`Нет данных` = ~sum(is.na(.x)),
`Ср. знач.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", mean(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Станд. отклон.` = ~ifelse(sum(!is.na(.x)) < 3, "Н/П*", sd(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`95% ДИ для среднего` = ~sd(.x, na.rm = TRUE) %>% round(2) %>% as.character(),
`мин. - макс.` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(min(.x, na.rm = TRUE) %>% round(2), " - ", max(.x, na.rm = TRUE) %>% round(2))),
`Медиана` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", median(.x, na.rm = TRUE) %>% round(2) %>% as.character()),
`Q1 - Q3` = ~ifelse(sum(!is.na(.x)) == 0, "Н/П*", paste0(quantile(.x, 0.25, na.rm = TRUE) %>% round(2), " - ", quantile(.x, 0.75, na.rm = TRUE) %>% round(2)))
)
data %>%
select(`Группа`, where(is.numeric)) %>%
group_by(`Группа`) %>%
summarise(across(where(is.numeric), statistics)) %>%
pivot_longer(!`Группа`) %>%
separate(name, into = c("Переменная", "Статистика"), sep = "__") %>%
rename(`Значение` = value) %>%
flextable() %>%
theme_box()
R.version
update.packages()
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
if(!require(installr)) {
install.packages("installr");
require(installr)
}
updateR()
remove.packages("rlang")
remove.packages("flextable")
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr", "flextable"))
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("flextable", dependencies = TRUE)
knitr::opts_chunk$set(echo = TRUE)
install.packages(c("readr", "tibble", "dplyr", "tidyr"))
install.packages("flextable", dependencies = TRUE)
library(readr)
library(tibble)
library(dplyr)
library(tidyr)
library(flextable)
